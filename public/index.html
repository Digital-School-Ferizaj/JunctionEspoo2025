<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Amily - Premium Digital Companion</title>
    <link rel="icon" type="image/png" href="/logo.png" />
    
    <!-- React and ReactDOM from CDN -->
    <script crossorigin src="https://unpkg.com/react@18.3.1/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18.3.1/umd/react-dom.development.js"></script>
    
    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Custom font & Tailwind theme tweaks -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        display: ['DM Sans', 'system-ui', 'sans-serif'],
                        body: ['DM Sans', 'system-ui', 'sans-serif'],               
                    },
                    dropShadow: {
                        glow: '0 0 25px rgba(244, 114, 182, 0.45)',
                    },
                },
            },
        };
    </script>
    <style>
        @keyframes blob {
            0%, 100% {
                transform: translate(0, 0) scale(1);
            }
            33% {
                transform: translate(30px, -50px) scale(1.1);
            }
            66% {
                transform: translate(-20px, 20px) scale(0.9);
            }
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .animate-blob {
            animation: blob 7s infinite;
        }

        .animate-slideIn {
            animation: slideIn 0.3s ease-out;
        }

        .animation-delay-200 {
            animation-delay: 200ms;
        }

        .animation-delay-400 {
            animation-delay: 400ms;
        }

        .animation-delay-2000 {
            animation-delay: 2s;
        }

        .animation-delay-4000 {
            animation-delay: 4s;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel" src="/components/icons.jsx"></script>
    <script type="text/babel" src="/components/tabs/HomeTab.jsx"></script>
    <script type="text/babel" src="/components/tabs/SafetyTab.jsx"></script>
    <script type="text/babel" src="/components/tabs/WellnessTab.jsx"></script>
    <script type="text/babel" src="/components/tabs/MemoriesTab.jsx"></script>
    <script type="text/babel" src="/components/tabs/SupportTab.jsx"></script>
    <script type="text/babel" src="/components/tabs/ChatTab.jsx"></script>

    <script type="text/babel">
        const { useState } = React;
        const { createRoot } = ReactDOM;

        const Icons = window.AmilyIcons || {};
        const {
            ShieldIcon,
            HeartIcon,
            CalendarIcon,
            BookOpenIcon,
            UsersIcon,
            PillIcon,
            PhoneIcon,
            MenuIcon,
            XIcon,
        } = Icons;

        const Tabs = window.AmilyTabs || {};
        const {
            HomeTab,
            SafetyTab,
            WellnessTab,
            MemoriesTab,
            SupportTab,
            ChatTab,
        } = Tabs;

        // FeatureCard Component
        function FeatureCard({ icon: Icon, title, description, gradient, darkMode }) {
            const [tilt, setTilt] = useState({ rotateX: 0, rotateY: 0 });

            const handleMouseMove = (e) => {
                const rect = e.currentTarget.getBoundingClientRect();
                const x = e.clientX - rect.left;
                const y = e.clientY - rect.top;
                const centerX = rect.width / 2;
                const centerY = rect.height / 2;

                const rotateX = ((y - centerY) / centerY) * -10; // tilt towards cursor
                const rotateY = ((x - centerX) / centerX) * 10;

                setTilt({ rotateX, rotateY });
            };

            const handleMouseLeave = () => {
                setTilt({ rotateX: 0, rotateY: 0 });
            };

            return (
                <div
                    onMouseMove={handleMouseMove}
                    onMouseLeave={handleMouseLeave}
                    style={{
                        transform: `perspective(900px) rotateX(${tilt.rotateX}deg) rotateY(${tilt.rotateY}deg)`,
                    }}
                    className={`group relative overflow-hidden rounded-3xl p-8 transition-transform duration-300 hover:drop-shadow-glow border ${
                        darkMode
                            ? 'bg-gradient-to-b from-slate-950/90 via-slate-900/70 to-slate-900/40 border-slate-700/80'
                            : 'bg-gradient-to-b from-white via-rose-50/70 to-orange-50/40 border-rose-100'
                    }`}
                >
                    <div className="pointer-events-none absolute inset-px rounded-[1.35rem] border border-white/5" />
                    <div className="relative flex flex-col h-full">
                        <div className="flex items-center justify-between mb-6">
                            <div
                                className={`inline-flex p-4 rounded-2xl bg-gradient-to-br ${gradient} shadow-lg group-hover:scale-110 transition-transform duration-300 text-white`}
                            >
                                <Icon />
                            </div>
                            <span
                                className={`text-[11px] uppercase tracking-[0.22em] font-semibold ${
                                    darkMode ? 'text-slate-400' : 'text-rose-400'
                                }`}
                            >
                                Core Pillar
                            </span>
                        </div>
                        <h3
                            className={`text-xl md:text-2xl font-bold mb-3 font-display group-hover:text-rose-400 transition-colors ${
                                darkMode ? 'text-slate-50' : 'text-slate-900'
                            }`}
                        >
                            {title}
                        </h3>
                        <p
                            className={`leading-relaxed text-sm md:text-base ${
                                darkMode ? 'text-slate-300' : 'text-slate-600'
                            }`}
                        >
                            {description}
                        </p>
                        <div className="mt-6 flex items-center justify-between text-xs text-slate-400">
                            <div className="flex items-center gap-2">
                                <span className="inline-flex h-5 w-5 items-center justify-center rounded-full bg-emerald-500/10 text-emerald-400 text-[11px]">
                                    ✓
                                </span>
                                <span className="uppercase tracking-[0.18em]">Gentle by design</span>
                            </div>
                            <span className="opacity-70 group-hover:opacity-100 transition-opacity">
                                Tap to explore
                            </span>
                        </div>
                    </div>
                </div>
            );
        }

        // Navigation Component
        function Navigation({ systemStatus, darkMode, currentPage, onNavigate, onLogout }) {
            const [isMenuOpen, setIsMenuOpen] = useState(false);

            const navItems = [
                { id: 'home', label: 'Home' },
                { id: 'safety', label: 'Safety' },
                { id: 'wellness', label: 'Wellness' },
                { id: 'memories', label: 'Memories' },
                { id: 'empathy', label: 'Support' },
                { id: 'chatbox', label: 'Chat' }
            ];

            const getStatusColor = () => {
                if (systemStatus === 'loading') return 'bg-gray-400';
                if (systemStatus === 'offline') return 'bg-gray-500';
                return 'bg-emerald-500';
            };

            return (
                <nav className={`fixed top-0 left-0 right-0 z-50 backdrop-blur-lg border-b shadow-sm transition-colors ${
                    darkMode ? 'bg-gray-900/80 border-gray-700' : 'bg-white/80 border-rose-100'
                }`}>
                    <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                        <div className="flex items-center justify-between h-16">
                            <button type="button" onClick={() => onNavigate('home')} className="flex items-center group">
                                <img src="/logo.png" alt="Amily" className="w-16 h-16 transform transition-transform group-hover:scale-110" />
                            </button>

                            <div className="hidden md:flex items-center gap-1">
                                {navItems.map((item) => (
                                    <button
                                        key={item.id}
                                        type="button"
                                        onClick={() => onNavigate(item.id)}
                                        className={`px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 ${
                                            darkMode 
                                                ? 'text-gray-300 hover:text-rose-400 hover:bg-gray-800' 
                                                : 'text-gray-700 hover:text-rose-600 hover:bg-rose-50'
                                        } ${currentPage === item.id ? (darkMode ? 'bg-gray-800 text-rose-400' : 'bg-rose-50 text-rose-600') : ''}`}
                                    >
                                        {item.label}
                                    </button>
                                ))}
                                <div className="ml-4 flex items-center gap-3">
                                    <div className={`flex items-center gap-2 px-3 py-1.5 rounded-full ${
                                        darkMode ? 'bg-gray-800' : 'bg-gray-50'
                                    }`}>
                                        <div className={`w-2 h-2 rounded-full ${getStatusColor()} animate-pulse`} />
                                        <span className={`text-xs font-medium uppercase ${
                                            darkMode ? 'text-gray-300' : 'text-gray-600'
                                        }`}>{systemStatus}</span>
                                    </div>
                                    <button className="flex items-center gap-2 px-5 py-2.5 bg-gradient-to-r from-rose-500 to-orange-500 text-white rounded-full font-semibold shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-200">
                                        <PhoneIcon />
                                        <span className="hidden lg:inline">Emergency</span>
                                    </button>
                                    {onLogout && (
                                        <button
                                            type="button"
                                            onClick={onLogout}
                                            className={`px-4 py-2 rounded-full text-xs font-semibold border transition-all duration-200 ${
                                                darkMode
                                                    ? 'border-slate-600 text-slate-200 hover:bg-slate-900'
                                                    : 'border-slate-300 text-slate-700 hover:bg-slate-50'
                                            }`}
                                        >
                                            Log out
                                        </button>
                                    )}
                                </div>
                            </div>

                            <button
                                className={`md:hidden p-2 rounded-lg ${darkMode ? 'hover:bg-gray-800 text-gray-300' : 'hover:bg-gray-100'}`}
                                onClick={() => setIsMenuOpen(!isMenuOpen)}
                            >
                                {isMenuOpen ? <XIcon /> : <MenuIcon />}
                            </button>
                        </div>
                    </div>

                    {isMenuOpen && (
                        <div className={`md:hidden border-t ${darkMode ? 'bg-gray-900 border-gray-700' : 'bg-white border-rose-100'}`}>
                            <div className="px-4 py-3 space-y-1">
                                {navItems.map((item) => (
                                    <button
                                        key={item.id}
                                        type="button"
                                        className={`block w-full text-left px-4 py-2 rounded-lg text-sm font-medium ${
                                            darkMode 
                                                ? 'text-gray-300 hover:text-rose-400 hover:bg-gray-800' 
                                                : 'text-gray-700 hover:text-rose-600 hover:bg-rose-50'
                                        } ${currentPage === item.id ? (darkMode ? 'bg-gray-800 text-rose-400' : 'bg-rose-50 text-rose-600') : ''}`}
                                        onClick={() => {
                                            onNavigate(item.id);
                                            setIsMenuOpen(false);
                                        }}
                                    >
                                        {item.label}
                                    </button>
                                ))}
                                {onLogout && (
                                    <button
                                        type="button"
                                        className={`mt-2 block w-full text-left px-4 py-2 rounded-lg text-sm font-semibold border ${
                                            darkMode
                                                ? 'border-slate-600 text-slate-200 hover:bg-slate-900'
                                                : 'border-slate-300 text-slate-700 hover:bg-slate-50'
                                        }`}
                                        onClick={() => {
                                            onLogout();
                                            setIsMenuOpen(false);
                                        }}
                                    >
                                        Log out
                                    </button>
                                )}
                            </div>
                        </div>
                    )}
                </nav>
            );
        }

        // Login Page
        function LoginPage({ darkMode, onAuthSuccess }) {
            const [email, setEmail] = useState('');
            const [password, setPassword] = useState('');
            const [status, setStatus] = useState(null);

            const handleSubmit = async (e) => {
                e.preventDefault();
                setStatus({ type: 'loading', message: 'Logging you in…' });

                try {
                    const res = await fetch('/api/auth/login', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ email, password }),
                    });
                    const data = await res.json();

                    if (!res.ok || !data.success) {
                        setStatus({ type: 'error', message: data.error || 'Could not log you in.' });
                    } else {
                        setStatus({ type: 'success', message: 'Logged in successfully.' });
                        if (onAuthSuccess) onAuthSuccess();
                    }
                } catch (err) {
                    setStatus({ type: 'error', message: 'Network error while logging in.' });
                }
            };

            return (
                <section id="login" className="relative py-20">
                    <div className="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
                        <div className="flex flex-col gap-3 mb-8 text-center sm:text-left">
                            <div className="inline-flex items-center gap-2 px-3 py-1 rounded-full border text-[11px] font-semibold uppercase tracking-[0.26em] mx-auto sm:mx-0 bg-black/5 backdrop-blur-sm">
                                <UsersIcon />
                                <span className={darkMode ? 'text-slate-200' : 'text-slate-700'}>Welcome back</span>
                            </div>
                            <div className="space-y-1">
                                <h2 className={`font-display text-3xl sm:text-4xl font-bold ${
                                    darkMode ? 'text-slate-50' : 'text-slate-900'
                                }`}>
                                    Log in to your Amily space.
                                </h2>
                                <p className={darkMode ? 'text-slate-400 text-sm sm:text-base' : 'text-slate-600 text-sm sm:text-base'}>
                                    Continue where you left off with check-ins, memories, and your care circle.
                                </p>
                            </div>
                        </div>

                        <div
                            className={`rounded-3xl border shadow-2xl overflow-hidden backdrop-blur-xl ${
                                darkMode ? 'bg-slate-950/80 border-slate-800' : 'bg-white/90 border-slate-100'
                            }`}
                        >
                            <div className="grid gap-0 md:grid-cols-[minmax(0,1.1fr),minmax(0,0.9fr)]">
                                <div className="p-6 sm:p-8 border-b md:border-b-0 md:border-r border-white/10">
                                    <form className="space-y-5" onSubmit={handleSubmit}>
                                        <div className="space-y-2">
                                            <label
                                                className={darkMode ? 'text-slate-200 text-xs font-semibold uppercase tracking-[0.18em]' : 'text-slate-600 text-xs font-semibold uppercase tracking-[0.18em]'}
                                            >
                                                Email
                                            </label>
                                            <input
                                                type="email"
                                                required
                                                value={email}
                                                onChange={(e) => setEmail(e.target.value)}
                                                placeholder="you@example.com"
                                                className={`w-full px-4 py-3 rounded-2xl text-sm focus:outline-none focus:ring-2 focus:ring-rose-400/60 ${
                                                    darkMode
                                                        ? 'border border-slate-700 bg-slate-950 text-slate-100 placeholder-slate-500'
                                                        : 'border border-slate-200 bg-white text-slate-900 placeholder-slate-400'
                                                }`}
                                            />
                                        </div>
                                        <div className="space-y-2">
                                            <label
                                                className={darkMode ? 'text-slate-200 text-xs font-semibold uppercase tracking-[0.18em]' : 'text-slate-600 text-xs font-semibold uppercase tracking-[0.18em]'}
                                            >
                                                Password
                                            </label>
                                            <input
                                                type="password"
                                                required
                                                value={password}
                                                onChange={(e) => setPassword(e.target.value)}
                                                placeholder="Enter your password"
                                                className={`w-full px-4 py-3 rounded-2xl text-sm focus:outline-none focus:ring-2 focus:ring-rose-400/60 ${
                                                    darkMode
                                                        ? 'border border-slate-700 bg-slate-950 text-slate-100 placeholder-slate-500'
                                                        : 'border border-slate-200 bg-white text-slate-900 placeholder-slate-400'
                                                }`}
                                            />
                                        </div>
                                        <div className="flex items-center justify-between text-[11px] text-slate-400">
                                            <label className="inline-flex items-center gap-2 cursor-pointer">
                                                <input
                                                    type="checkbox"
                                                    className="rounded border-slate-600 bg-slate-950 text-rose-500 focus:ring-rose-500/60"
                                                />
                                                <span>Keep me logged in</span>
                                            </label>
                                            <button
                                                type="button"
                                                className="text-rose-300 hover:text-rose-200 underline-offset-4 hover:underline"
                                            >
                                                Forgot password?
                                            </button>
                                        </div>
                                        {status && (
                                            <div
                                                className={`text-xs rounded-2xl px-3 py-2 ${
                                                    status.type === 'success'
                                                        ? 'bg-emerald-900/40 text-emerald-200 border border-emerald-500/40'
                                                        : status.type === 'error'
                                                        ? 'bg-red-900/40 text-red-100 border border-red-500/40'
                                                        : 'bg-slate-900/40 text-slate-200 border border-slate-700/40'
                                                }`}
                                            >
                                                {status.message}
                                            </div>
                                        )}
                                        <button
                                            type="submit"
                                            className="mt-2 inline-flex w-full items-center justify-center gap-2 px-6 py-3 bg-gradient-to-r from-rose-500 to-orange-500 text-white rounded-2xl text-sm font-semibold shadow-lg hover:shadow-xl transform hover:scale-[1.02] active:scale-[0.98] transition-all duration-200"
                                        >
                                            Log in
                                        </button>
                                        <p className="text-[11px] text-slate-500 text-center">
                                            By logging in, you agree to use Amily gently and respectfully.
                                        </p>
                                    </form>
                                </div>

                                <div className="p-6 sm:p-8 text-sm bg-gradient-to-b from-rose-500/20 via-slate-950/60 to-slate-950/90 border-t md:border-t-0 md:border-l border-white/10 flex flex-col justify-between">
                                    <div className="space-y-4">
                                        <h3 className="text-slate-50 text-sm font-semibold">
                                            Designed for older adults and their families
                                        </h3>
                                        <ul className="space-y-2 text-xs text-slate-200">
                                            <li>• Large, legible text and calm colors.</li>
                                            <li>• Simple, predictable navigation between sections.</li>
                                            <li>• Supportive language that never feels robotic or cold.</li>
                                        </ul>
                                    </div>
                                    <div className="mt-6 text-[11px] text-slate-400">
                                        Have not set up an account yet? Use the Sign up tab to create a shared space for
                                        your family.
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
            );
        }

        // Signup Page
        function SignupPage({ darkMode, onAuthSuccess }) {
            const [fullName, setFullName] = useState('');
            const [email, setEmail] = useState('');
            const [password, setPassword] = useState('');
            const [confirmPassword, setConfirmPassword] = useState('');
            const [supportedPerson, setSupportedPerson] = useState('Me');
            const [accepted, setAccepted] = useState(false);
            const [status, setStatus] = useState(null);

            const handleSubmit = async (e) => {
                e.preventDefault();

                if (password !== confirmPassword) {
                    setStatus({ type: 'error', message: 'Passwords do not match.' });
                    return;
                }

                if (!accepted) {
                    setStatus({ type: 'error', message: 'Please accept the understanding statement.' });
                    return;
                }

                setStatus({ type: 'loading', message: 'Creating your account…' });

                try {
                    const res = await fetch('/api/auth/signup', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({
                            email,
                            password,
                            fullName,
                            supportedPerson,
                        }),
                    });
                    const data = await res.json();

                    if (!res.ok || !data.success) {
                        setStatus({ type: 'error', message: data.error || 'Could not create your account.' });
                    } else {
                        setStatus({
                            type: 'success',
                            message: 'Account created. Please check your email to confirm, if required.',
                        });
                        if (onAuthSuccess) onAuthSuccess();
                    }
                } catch (err) {
                    setStatus({ type: 'error', message: 'Network error while creating your account.' });
                }
            };

            return (
                <section id="signup" className="relative py-20">
                    <div className="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
                        <div className="flex flex-col gap-3 mb-8 text-center sm:text-left">
                            <div className="inline-flex items-center gap-2 px-3 py-1 rounded-full border text-[11px] font-semibold uppercase tracking-[0.26em] mx-auto sm:mx-0 bg-black/5 backdrop-blur-sm">
                                <UsersIcon />
                                <span className={darkMode ? 'text-emerald-200' : 'text-emerald-700'}>Create an account</span>
                            </div>
                            <div className="space-y-1">
                                <h2 className={`font-display text-3xl sm:text-4xl font-bold ${
                                    darkMode ? 'text-slate-50' : 'text-slate-900'
                                }`}>
                                    Start your journey with Amily.
                                </h2>
                                <p className={darkMode ? 'text-slate-400 text-sm sm:text-base' : 'text-slate-600 text-sm sm:text-base'}>
                                    Set up a safe, shared space where Amily can support you and your loved ones.
                                </p>
                            </div>
                        </div>

                        <div
                            className={`rounded-3xl border shadow-2xl overflow-hidden backdrop-blur-xl ${
                                darkMode ? 'bg-slate-950/80 border-slate-800' : 'bg-white/90 border-emerald-100'
                            }`}
                        >
                            <div className="p-6 sm:p-8">
                                <form className="space-y-5 max-w-xl mx-auto" onSubmit={handleSubmit}>
                                    <div className="space-y-2">
                                        <label
                                            className={darkMode ? 'text-slate-200 text-xs font-semibold uppercase tracking-[0.18em]' : 'text-slate-600 text-xs font-semibold uppercase tracking-[0.18em]'}
                                        >
                                            Full name
                                        </label>
                                        <input
                                            type="text"
                                            required
                                            value={fullName}
                                            onChange={(e) => setFullName(e.target.value)}
                                            placeholder="For example: Maria Delgado"
                                            className={`w-full px-4 py-3 rounded-2xl text-sm focus:outline-none focus:ring-2 focus:ring-emerald-400/60 ${
                                                darkMode
                                                    ? 'border border-slate-700 bg-slate-950 text-slate-100 placeholder-slate-500'
                                                    : 'border border-slate-200 bg-white text-slate-900 placeholder-slate-400'
                                            }`}
                                        />
                                    </div>
                                    <div className="space-y-2">
                                        <label
                                            className={darkMode ? 'text-slate-200 text-xs font-semibold uppercase tracking-[0.18em]' : 'text-slate-600 text-xs font-semibold uppercase tracking-[0.18em]'}
                                        >
                                            Email
                                        </label>
                                        <input
                                            type="email"
                                            required
                                            value={email}
                                            onChange={(e) => setEmail(e.target.value)}
                                            placeholder="you@example.com"
                                            className={`w-full px-4 py-3 rounded-2xl text-sm focus:outline-none focus:ring-2 focus:ring-emerald-400/60 ${
                                                darkMode
                                                    ? 'border border-slate-700 bg-slate-950 text-slate-100 placeholder-slate-500'
                                                    : 'border border-slate-200 bg-white text-slate-900 placeholder-slate-400'
                                            }`}
                                        />
                                    </div>
                                    <div className="grid gap-4 sm:grid-cols-2">
                                        <div className="space-y-2">
                                            <label
                                                className={darkMode ? 'text-slate-200 text-xs font-semibold uppercase tracking-[0.18em]' : 'text-slate-600 text-xs font-semibold uppercase tracking-[0.18em]'}
                                            >
                                                Password
                                            </label>
                                            <input
                                                type="password"
                                                required
                                                value={password}
                                                onChange={(e) => setPassword(e.target.value)}
                                                placeholder="Create a password"
                                                className={`w-full px-4 py-3 rounded-2xl text-sm focus:outline-none focus:ring-2 focus:ring-emerald-400/60 ${
                                                    darkMode
                                                        ? 'border border-slate-700 bg-slate-950 text-slate-100 placeholder-slate-500'
                                                        : 'border border-slate-200 bg-white text-slate-900 placeholder-slate-400'
                                                }`}
                                            />
                                        </div>
                                        <div className="space-y-2">
                                            <label
                                                className={darkMode ? 'text-slate-200 text-xs font-semibold uppercase tracking-[0.18em]' : 'text-slate-600 text-xs font-semibold uppercase tracking-[0.18em]'}
                                            >
                                                Confirm password
                                            </label>
                                            <input
                                                type="password"
                                                required
                                                value={confirmPassword}
                                                onChange={(e) => setConfirmPassword(e.target.value)}
                                                placeholder="Repeat your password"
                                                className={`w-full px-4 py-3 rounded-2xl text-sm focus:outline-none focus:ring-2 focus:ring-emerald-400/60 ${
                                                    darkMode
                                                        ? 'border border-slate-700 bg-slate-950 text-slate-100 placeholder-slate-500'
                                                        : 'border border-slate-200 bg-white text-slate-900 placeholder-slate-400'
                                                }`}
                                            />
                                        </div>
                                    </div>
                                    <div className="space-y-2">
                                        <label
                                            className={darkMode ? 'text-slate-200 text-xs font-semibold uppercase tracking-[0.18em]' : 'text-slate-600 text-xs font-semibold uppercase tracking-[0.18em]'}
                                        >
                                            Who is Amily primarily supporting?
                                        </label>
                                        <select
                                            value={supportedPerson}
                                            onChange={(e) => setSupportedPerson(e.target.value)}
                                            className={`w-full px-4 py-3 rounded-2xl text-sm focus:outline-none focus:ring-2 focus:ring-emerald-400/60 ${
                                                darkMode
                                                    ? 'border border-slate-700 bg-slate-950 text-slate-100'
                                                    : 'border border-slate-200 bg-white text-slate-900'
                                            }`}
                                        >
                                            <option value="Me">Me</option>
                                            <option value="My parent">My parent</option>
                                            <option value="My grandparent">My grandparent</option>
                                            <option value="Other loved one">Other loved one</option>
                                        </select>
                                    </div>
                                    <div className="flex items-start gap-2 text-[11px] text-slate-400">
                                        <input
                                            type="checkbox"
                                            required
                                            checked={accepted}
                                            onChange={(e) => setAccepted(e.target.checked)}
                                            className="mt-0.5 rounded border-slate-600 bg-slate-950 text-emerald-500 focus:ring-emerald-500/60"
                                        />
                                        <span>
                                            I understand that Amily is a supportive companion and does not provide medical,
                                            legal, or crisis advice.
                                        </span>
                                    </div>
                                    {status && (
                                        <div
                                            className={`text-xs rounded-2xl px-3 py-2 ${
                                                status.type === 'success'
                                                    ? 'bg-emerald-900/40 text-emerald-200 border border-emerald-500/40'
                                                    : status.type === 'error'
                                                    ? 'bg-red-900/40 text-red-100 border border-red-500/40'
                                                    : 'bg-slate-900/40 text-slate-200 border border-slate-700/40'
                                            }`}
                                        >
                                            {status.message}
                                        </div>
                                    )}
                                    <button
                                        type="submit"
                                        className="mt-2 inline-flex w-full items-center justify-center gap-2 px-6 py-3 bg-gradient-to-r from-emerald-500 to-teal-500 text-white rounded-2xl text-sm font-semibold shadow-lg hover:shadow-xl transform hover:scale-[1.02] active:scale-[0.98] transition-all duration-200"
                                    >
                                        Create account
                                    </button>
                                    <p className="text-[11px] text-slate-500 text-center">
                                        You can add caregivers and family members later from your settings.
                                    </p>
                                </form>
                            </div>
                        </div>
                    </div>
                </section>
            );
        }

        // Main App Component
        function App() {
            const [systemStatus] = useState('online');
            const darkMode = true; // Always dark mode
            const [currentPage, setCurrentPage] = useState('home');
            const [isLoggedIn, setIsLoggedIn] = useState(false);

            const handleNavigate = (pageId) => {
                setCurrentPage(pageId);
                // Scroll to top when changing "pages"
                window.scrollTo(0, 0);
            };

            const features = [
                {
                    icon: ShieldIcon,
                    title: 'Safety Intelligence',
                    description: 'Emergency detection, vitals monitoring, and instant caregiver alerts',
                    gradient: 'from-rose-500 to-pink-500'
                },
                {
                    icon: PillIcon,
                    title: 'Wellness Coaching',
                    description: 'Medication reminders, hydration tracking, and weather-aware guidance',
                    gradient: 'from-blue-500 to-cyan-500'
                },
                {
                    icon: CalendarIcon,
                    title: 'Daily Check-ins',
                    description: 'Mood assessment and gentle planning for the day ahead',
                    gradient: 'from-amber-500 to-orange-500'
                },
                {
                    icon: BookOpenIcon,
                    title: 'MemoryLane',
                    description: 'Record and preserve precious life stories and memories',
                    gradient: 'from-purple-500 to-violet-500'
                },
                {
                    icon: UsersIcon,
                    title: 'Buddy System',
                    description: 'Safe social engagement with voice messages and support',
                    gradient: 'from-emerald-500 to-teal-500'
                },
                {
                    icon: HeartIcon,
                    title: 'Empathetic Care',
                    description: 'Emotion detection and warm, reassuring responses',
                    gradient: 'from-rose-500 to-red-500'
                }
            ];

            return (
                <div className={`min-h-screen transition-colors duration-300 font-body ${
                    darkMode 
                        ? 'bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900' 
                        : 'bg-gradient-to-br from-rose-50 via-white to-orange-50'
                }`}>
                    {isLoggedIn && (
                        <Navigation
                            systemStatus={systemStatus}
                            darkMode={darkMode}
                            currentPage={currentPage}
                            onNavigate={handleNavigate}
                            onLogout={() => {
                                setIsLoggedIn(false);
                                setCurrentPage('home');
                            }}
                        />
                    )}

                    <main className="relative">
                        {currentPage === 'home' && HomeTab && (
                            <HomeTab
                                darkMode={darkMode}
                                isLoggedIn={isLoggedIn}
                                onNavigate={handleNavigate}
                                features={features}
                                FeatureCard={FeatureCard}
                            />
                        )}

                        {currentPage === 'safety' && SafetyTab && <SafetyTab darkMode={darkMode} />}
                        {currentPage === 'wellness' && WellnessTab && <WellnessTab darkMode={darkMode} />}
                        {currentPage === 'memories' && MemoriesTab && <MemoriesTab darkMode={darkMode} />}
                        {currentPage === 'empathy' && SupportTab && <SupportTab darkMode={darkMode} />}
                        {currentPage === 'chatbox' && ChatTab && <ChatTab darkMode={darkMode} />}
                        {currentPage === 'login' && (
                            <LoginPage
                                darkMode={darkMode}
                                onAuthSuccess={() => {
                                    setIsLoggedIn(true);
                                    setCurrentPage('home');
                                }}
                            />
                        )}
                        {currentPage === 'signup' && (
                            <SignupPage
                                darkMode={darkMode}
                                onAuthSuccess={() => {
                                    setIsLoggedIn(true);
                                    setCurrentPage('home');
                                }}
                            />
                        )}

                        <footer className="bg-gradient-to-r from-rose-500 to-orange-500 text-white py-12 mt-32">
                            <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
                                <p className="text-lg font-medium mb-2">Built with care for those who deserve patience, dignity, and warmth.</p>
                                <p className="text-rose-100">Version 1.0.0 | Amily Companion</p>
                            </div>
                        </footer>
                    </main>
                </div>
            );
        }

        // Mount the app
        const root = createRoot(document.getElementById('root'));
        root.render(React.createElement(App));
    </script>
</body>
</html>
